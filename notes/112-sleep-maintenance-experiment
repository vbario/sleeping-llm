Plan: Test Sleep Maintenance Refresh on 8B             

 Context

 The 70B comprehensive experiment (note 111) showed 100% recall with zero degradation — the system was too
 robust to trigger the maintenance refresh path. We need a model where degradation actually happens so we can
 prove sleep detects and fixes it.

 8B with 8 layers [12-19] is ideal: prior capacity tests (note 62) showed recall dipping to 0.65-0.70 at 10-20
  facts, meaning ~30-35% of facts fall below the 0.5 degraded threshold. This should trigger the
 _maintain_edits() path: revert degraded edit → re-inject with current null-space constraints.

 8B is ~5GB in 4-bit, with 8 dequantized layers — fits easily on a single H100 (no OOM risk).

 What We'll Create

 New config: experiments/configs/8b_v7.yaml

 Based on 8b_memit.yaml but cleaned up for v7 (no LoRA sections), with maintenance tuned:

 - Target layers: [12, 13, 14, 15, 16, 17, 18, 19] (same 8 middle layers as prior 8B tests)
 - max_active_edits: 50
 - max_refresh_per_cycle: 10
 - degraded_threshold: 0.5 (recall below 50% = degraded)
 - nap_audit_count: 10 (audit enough to catch degradation)

 New script: experiments/v7_maintenance_test.py

 Focused, single-purpose script (~200 lines). Three steps:

 Step 1: Inject until degradation appears
 1. Clean state, baseline PPL
 2. Inject facts from fact_pool_500.json in batches of 5
 3. After each batch: measure recall on ALL injected facts
 4. Track which specific facts are degraded (recall < 0.5)
 5. Stop when degraded_count >= 3 (or at 30 facts max)

 Step 2: Nap → detect degradation
 1. Run nap audit
 2. Record: audited count, degraded count, which facts degraded
 3. PASS condition: nap.degraded > 0

 Step 3: Sleep → fix degradation
 1. Record pre-sleep recall on all facts
 2. Trigger full sleep
 3. Record: facts_refreshed from sleep result
 4. Measure post-sleep recall on all facts
 5. Specifically check recall on the previously-degraded facts
 6. PASS condition: facts_refreshed > 0 AND post-sleep recall >= pre-sleep recall

 PASS criteria: Steps 2 and 3 both pass (degradation detected AND fixed).

 Key patterns (reused from v7_comprehensive_test.py)

 - clean_artifacts_v7(config) — clean conversations + memit_data dirs
 - fresh_orchestrator(config) — create Orchestrator, disable auto-triggers
 - trigger_sleep(orch) / trigger_nap(orch) — call controllers directly
 - test_recall(backend, facts) — raw completion recall test
 - measure_perplexity(backend) — average over reference texts
 - load_fact_pool() — load FactTriples from fact_pool_500.json
 - destroy_orchestrator(orch) + cleanup_gpu() — free VRAM after

 Output JSON

 {
   "config": { "model": "...", "layers": [...] },
   "step_1_injection": {
     "total_facts": 25,
     "batches": 5,
     "final_recall": 0.68,
     "degraded_count": 8,
     "trajectory": [...]
   },
   "step_2_nap": {
     "verdict": "PASS",
     "audited": 10,
     "degraded": 4,
     "degraded_facts": [...]
   },
   "step_3_sleep": {
     "verdict": "PASS",
     "facts_refreshed": 4,
     "recall_pre": 0.68,
     "recall_post": 0.76,
     "degraded_facts_before": [...],
     "degraded_facts_after": [...],
     "ppl_before": ...,
     "ppl_after": ...
   },
   "overall_verdict": "PASS"
 }

 Files

 ┌────────────────────────────────────┬────────────────────────────────────────────────┐
 │                File                │                     Action                     │
 ├────────────────────────────────────┼────────────────────────────────────────────────┤
 │ experiments/configs/8b_v7.yaml     │ Create — clean v7 config for 8B                │
 ├────────────────────────────────────┼────────────────────────────────────────────────┤
 │ experiments/v7_maintenance_test.py │ Create — focused maintenance test (~200 lines) │
 └────────────────────────────────────┴────────────────────────────────────────────────┘

 No changes to src/ files.

 Verification

 1. rsync to H100 (still up at ssh -p 22294 root@45.135.56.10)
 2. Run: python3 experiments/v7_maintenance_test.py --config experiments/configs/8b_v7.yaml
 3. Expected runtime: ~15-20 min (8B loads fast, 25 facts + 1 nap + 1 sleep)
 4. Check JSON output for facts_refreshed > 0 and recall improvement
 5. Save results, update notes
